#include "../nemequ/munit.h"

#define TESTS \
    TEST(EmptyParams_Text, "", "query", munit_assert_false) \
    TEST(EmptyParams_Text_LoneWildcard, "", "*", munit_assert_true) \
    TEST(EmptyParams_Query, "text", "", munit_assert_false) \
    \
    /* Non-wildcard cases */ \
    TEST(NonWildcard_ExactMatch, "text", "text", munit_assert_true) \
    TEST(NonWildcard_SingleLetterMatch, "t", "t", munit_assert_true) \
    TEST(NonWildcard_LeadingMissingQueryChar, "text", "atext", munit_assert_true) \
    TEST(NonWildcard_TrailingMissingQueryChar, "text", "textz", munit_assert_true) \
    TEST(NonWildcard_MiddleMissingQueryChar, "text", "temxt", munit_assert_true) \
    TEST(NonWildcard_MissingTextChar, "tet", "text", munit_assert_false) \
    \
    /* Lone wildcard cases */ \
    TEST(LoneWildcards_Single, "text", "*", munit_assert_true) \
    TEST(LoneWildcards_Dual, "text", "**", munit_assert_true) \
    \
    /* Testing anchored queries (Could parameterize later) */ \
    TEST(AnchoredQueries_Match_UnanchoredQuery, "text", "*text*", munit_assert_true) \
    TEST(AnchoredQueries_Match_RightAnchoredQuery, "text", "*text", munit_assert_true) \
    TEST(AnchoredQueries_Match_LeftAnchoredQuery, "text", "text*", munit_assert_true) \
    TEST(AnchoredQueries_Match_DualUnanchored, "text", "**text**", munit_assert_true) \
    TEST(AnchoredQueries_SingleLetterQuery_DualAnchored_LeadingLetter, "match", "m", munit_assert_false) \
    TEST(AnchoredQueries_SingleLetterQuery_DualAnchored_TrailingLetter, "match", "h", munit_assert_false) \
    TEST(AnchoredQueries_SingleLetterQuery_DualAnchored_TrailingLetter, "match", "t", munit_assert_false) \
    TEST(AnchoredQueries_SingleLetterQuery_LeftAnchored_LeadingLetter, "match", "m*", munit_assert_true) \
    TEST(AnchoredQueries_SingleLetterQuery_RightAnchored_TrailingLetter, "match", "*m", munit_assert_true) \
    TEST(AnchoredQueries_SingleLetterQuery_NonAnchored_MiddleLetter, "match", "*t*", munit_assert_true) \
    \
    /* Original complex queries */ \
    TEST(OriginalComplex_MissingQueryLetter, "term", "*t*rm*", munit_assert_true) \
    TEST(OriginalComplex_AdditionalQueryLetter, "term", "*te*a*rm*", munit_assert_false) \
    TEST(OriginalComplex_ReversedSubqueryOrder, "term", "*rm*te*", munit_assert_false) \
    TEST(OriginalComplex_OverlappingSubqueries_Minimal, "term", "*ter*rm*", munit_assert_false) \
    TEST(OriginalComplex_OverlappingSubqueries_Moderate, "term", "*ter*erm*", munit_assert_false) \
    TEST(OriginalComplex_OverlappingSubqueries_Maximal, "term", "*term*term*", munit_assert_false) \
    TEST(OriginalComplex_MississippiRiver, "Mississippiriver", "*issippi*riv*", munit_assert_true) \
    \
    /* Start of Krauss Tests from http://www.drdobbs.com/architecture-and-design/matching-wildcards-an-empirical-way-to-t/240169123#ListingOne */ \
    TEST(Krauss_RepeatingCharacters_A, "abcccd", "*ccd", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_B, "mississipissippi", "*issip*ss*", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_C, "xxxxzzzzzzzzyf", "xxxx*zzy*fffff", munit_assert_false) \
    TEST(Krauss_RepeatingCharacters_D, "xxxxzzzzzzzzyf", "xxxx*zzy*f", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_E, "xyxyxyzyxyz", "xy*z*xyz", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_F, "mississippi", "*sip*", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_G, "xyxyxyxyz", "xy*xyz", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_H, "mississippi", "mi*sip*", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_I, "ababac", "*abac*", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_J, "aaazz", "a*zz*", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_K, "a12b12", "*12*23", munit_assert_false) \
    TEST(Krauss_RepeatingCharacters_L, "a12b12", "a12b", munit_assert_false) \
    TEST(Krauss_RepeatingCharacters_ReuseSearches, "a12b12", "*12*12*", munit_assert_true) \
    TEST(Krauss_RepeatingCharacters_WildcardInTerm_A, "xxxx*zzzzzzzzy*f", "xxxx*zzy*fffff", munit_assert_false) \
    TEST(Krauss_RepeatingCharacters_WildcardInTerm_B, "xxxx*zzzzzzzzy*f", "xxx*zzy*f", munit_assert_true) \
    \
    /* Additional cases where the '*' char appears in the tame string. */ \
    TEST(Krauss_WildcardInTerm_A, "*", "*", munit_assert_true) \
    TEST(Krauss_WildcardInTerm_B, "a*abab", "a*b", munit_assert_true) \
    TEST(Krauss_WildcardInTerm_C, "a*r", "a*", munit_assert_true) \
    TEST(Krauss_WildcardInTerm_D, "a*ar", "a*aar", munit_assert_false) \
    \
    /* More double wildcard scenarios. */ \
    TEST(Krauss_DoubleWildcard_A, "XYXYXYZYXYz", "XY*Z*XYz", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_B, "missisSIPpi", "*SIP*", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_C, "mississipPI", "*issip*PI", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_D, "xyxyxyxyz", "xy*xyz", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_E, "miSsissippi", "mi*sip*", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_F, "miSsissippi", "mi*Sip*", munit_assert_false) \
    TEST(Krauss_DoubleWildcard_G, "abAbac", "*Abac*", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_H, "abAbac", "*Abac*", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_I, "aAazz", "a*zz*", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_J, "A12b12", "*12*23", munit_assert_false) \
    TEST(Krauss_DoubleWildcard_K, "a12B12", "*12*12*", munit_assert_true) \
    TEST(Krauss_DoubleWildcard_L, "oWn", "*oWn*", munit_assert_true) \
    \
    /* Completely tame (no wildcards) cases. */ \
    TEST(Krauss_Tame_A, "bLah", "bLah", munit_assert_true) \
    TEST(Krauss_Tame_B, "bLah", "bLaH", munit_assert_false) \
    \
    /* Simple mixed wildcard tests suggested by IBMer Marlin Deckert. */ \
    TEST(Krauss_MixedSingleWildcard_A, "a", "*?", munit_assert_true) \
    TEST(Krauss_MixedSingleWildcard_B, "ab", "*?", munit_assert_true) \
    TEST(Krauss_MixedSingleWildcard_C, "abc", "*?", munit_assert_true) \
    \
    /* More mixed wildcard tests including coverage for false positives. */ \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_A, "a", "??", munit_assert_false) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_B, "ab", "?*?", munit_assert_true) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_C, "ab", "*?*?*", munit_assert_true) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_D, "abc", "?**?*?", munit_assert_true) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_E, "abc", "?**?*&?", munit_assert_false) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_F, "abcd", "?b*??", munit_assert_true) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_G, "abcd", "?a*??", munit_assert_false) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_H, "abcd", "?**?c?", munit_assert_true) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_I, "abcd", "?**?d?", munit_assert_false) \
    TEST(Krauss_MixedSingleWildcard_FalsePositives_J, "abcde", "?*b*?*d*?", munit_assert_true) \
    \
    /* Single-character-match cases. */ \
    TEST(Krauss_SingleWildcard_A, "bLah", "bL?h", munit_assert_true) \
    TEST(Krauss_SingleWildcard_B, "bLaaa", "bLa?", munit_assert_false) \
    TEST(Krauss_SingleWildcard_C, "bLah", "bLa?", munit_assert_true) \
    TEST(Krauss_SingleWildcard_D, "bLaH", "?Lah", munit_assert_false) \
    TEST(Krauss_SingleWildcard_E, "bLaH", "?LaH", munit_assert_true) \
    \
    /* Many-wildcard scenarios. */ \
    TEST(Krauss_ManyWildcard_A, "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaab", "a*a*a*a*a*a*aa*aaa*a*a*b", munit_assert_true) \
    TEST(Krauss_ManyWildcard_B, "abababababababababababababababababababaacacacacacacacadaeafagahaiajakalaaaaaaaaaaaaaaaaaffafagaagggagaaaaaaaab", "*a*b*ba*ca*a*aa*aaa*fa*ga*b*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_C, "abababababababababababababababababababaacacacacacacacadaeafagahaiajakalaaaaaaaaaaaaaaaaaffafagaagggagaaaaaaaab", "*a*b*ba*ca*a*x*aaa*fa*ga*b*", munit_assert_false) \
    TEST(Krauss_ManyWildcard_D, "abababababababababababababababababababaacacacacacacacadaeafagahaiajakalaaaaaaaaaaaaaaaaaffafagaagggagaaaaaaaab", "*a*b*ba*ca*aaaa*fa*ga*gggg*b*", munit_assert_false) \
    TEST(Krauss_ManyWildcard_E, "abababababababababababababababababababaacacacacacacacadaeafagahaiajakalaaaaaaaaaaaaaaaaaffafagaagggagaaaaaaaab", "*a*b*ba*ca*aaaa*fa*ga*ggg*b*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_F, "aaabbaabbaab", "*aabbaa*a*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_G, "a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*", "a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_H, "aaaaaaaaaaaaaaaaa", "*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_I, "aaaaaaaaaaaaaaaa", "*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*a*", munit_assert_false) \
    TEST(Krauss_ManyWildcard_J, "abc*abcd*abcde*abcdef*abcdefg*abcdefgh*abcdefghi*abcdefghij*abcdefghijk*abcdefghijkl*abcdefghijklm*abcdefghijklmn", "abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*", munit_assert_false) \
    TEST(Krauss_ManyWildcard_K, "abc*abcd*abcde*abcdef*abcdefg*abcdefgh*abcdefghi*abcdefghij*abcdefghijk*abcdefghijkl*abcdefghijklm*abcdefghijklmn", "abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_L, "abc*abcd*abcd*abc*abcd", "abc*abc*abc*abc*abc*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_M, "abc*abcd*abcd*abc*abcd*abcd*abc*abcd*abc*abc*abcd", "abc*abc*abc*abc*abc*abc*abc*abc*abc*abc*abcd", munit_assert_true) \
    TEST(Krauss_ManyWildcard_N, "********a********b********c********", "abc", munit_assert_false) \
    TEST(Krauss_ManyWildcard_O_482,  "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost.", "cost", munit_assert_true) \
    TEST(Krauss_ManyWildcard_O_1480, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "wanting", munit_assert_true) \
    TEST(Krauss_ManyWildcard_O_2836, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "wanting", munit_assert_true) \
    TEST(Krauss_ManyWildcard_O_5672, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "wanting", munit_assert_true) \
    TEST(Krauss_ManyWildcard_P,      "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost.", "*Have*ther*bl*rip*vast*strung your soul*go*lesson*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_Q_482,  "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost.", "*cost*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_Q_1480, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "*wanting*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_Q_2836, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "*wanting*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_Q_5672, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "*wanting*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_R,      "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost.", "*Have*ther*bl*rip*vast*strung your soul*go*lesson*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_S_482,  "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost.", "*cost*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_S_1480, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "*wanting*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_S_2836, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "*wanting*", munit_assert_true,) \
    TEST(Krauss_ManyWildcard_S_5672, "Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wantig you. Have you gazed on naked grandeur where there's nothing else to gaze on, set pieces and drop-curtain scenes galore, big mountians heaved to heaven, which the blinding sunsets blazon, black canyons where the rapids rip and roar? Have you swept the visioned valley with the green stream streaking through it, searched the vastness for a something you have lost? Have you strung your soul to silence? Then for God's sake go and do it \ Hear the challenge, learn the lesson, pay the cost. Have you wandered in teh wilderness, the sagebrush desolation, the bunch-grass levels where the cattle graze? Have you whistled bits of rag-time at the end of all creation, and learned to know the desert's little ways? Have you camped upon the foothills, have you galloped o'er the ranges, Have you roamed the arid sun-lands thorugh and through? Have you chummed up with the mesa? Do you know its moods and changes? Then listen to the wild-it's calling you. Have you known the great while silence, not a snow-gemmed twig aquiver? (eternal truths that shame our soothing lies.) Have you broken trail on snowshoes? mushed your huskies up the river, dared the unkown, led the way, and clutched the prize? Have you marked the map's void spaces, mingled with the mongrel races, felt the savage strength of brute in every thew? And though grim as hell the worst is, can you round it off with curses? Then harken to the wild-it's wanting you.", "*wanting*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_T, "abc", "********a********b********c********", munit_assert_true) \
    TEST(Krauss_ManyWildcard_U, "abc", "********a********b********b********", munit_assert_false) \
    TEST(Krauss_ManyWildcard_V, "*abc*", "***a*b*c***", munit_assert_true) \
    TEST(Krauss_ManyWildcard_W, "monkeys*", "m*key*s*", munit_assert_true) \
    TEST(Krauss_ManyWildcard_X, "monkeys*", "*m*o*n*k*e*y*s*", munit_assert_true)

#define TEST(NAME, TEXT, QUERY, ASSERTION) \
MunitResult NAME(const MunitParameter params[], void* fixture) { \
    char *text = TEXT; \
    char *query = QUERY; \
    bool result = wildcard_with_preprocessing(text, query); \
    ASSERTION (result); \
    return MUNIT_OK; \
}
TESTS
#undef TEST

#define TEST(NAME, TEXT, QUERY, ASSERTION) { #NAME, NAME, NULL, NULL, MUNIT_TEST_OPTION_NONE, NULL },
MunitTest legacy_tests[] = {
    TESTS
    { NULL, NULL, NULL, NULL, MUNIT_TEST_OPTION_NONE, NULL }
};
#undef TEST

static const MunitSuite legacy_test_suite = {
    "/legacy-tests", /* name */
    legacy_tests, /* tests */
    NULL, /* suites */
    1, /* iterations */
    MUNIT_SUITE_OPTION_NONE /* options */
};